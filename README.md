
#  whatsapp-integration-green-api

Проект Node.js-сервиса для интеграции с GREEN-API
(работа с методами WhatsApp API, построение интеграций и чат-ботов).

Проект реализован как отдельное законченное решение и использовался
для практического освоения возможностей GREEN-API, архитектурных подходов
и паттернов интеграции с внешним API.

##  Архитектурные решения

###  Разделение ответственности


Приложение построено с чётким разделением слоёв:

- __Routes__ — описание HTTP-маршрутов
- __Controllers__ — HTTP-адаптер (приём запроса / отдача ответа)
- __Services__ — бизнес-логика и интеграция с внешним API
- __Public__ — статическая HTML-страница для ручного тестирования

Такое разделение:
- упрощает поддержку и расширение
- позволяет изолировать бизнес-логику от Express
- делает код пригодным для тестирования

---
 
### Интеграция с GREEN-API

Взаимодействие с GREEN-API инкапсулировано в сервисном слое.
Для всех методов используется единая функция вызова API: 
  ```
  callGreenApi({
  idInstance,
  apiTokenInstance,
  method,
  body,
  httpMethod
})
```

Это позволяет:
- избежать дублирования кода
- централизовать работу с HTTP-запросами
- легко добавлять новые методы GREEN-API

---

###  Структура проекта

```
src/
├── controllers/
│   └── Controller.js
├── routes/
│   └── Routes.js
├── services/
│   └── Services.js
├── public/
│   └── index.html
├── index.js
└── .env
```
Понимаю, что в продакшене `.env` не коммитится. Переменные окружения вынесены в `.env.example` осознанно, чтобы отделить конфигурацию
от бизнес-логики и упростить дальнейшие изменения (смена порта, адреса API)
без необходимости правок в коде.

---

###  Используемые технологии:

* axios

* cors 

* dotenv 

* express

--------

### Описание маршрутов:

  | Метод            | Маршрут                 | HTTP |
| ---------------- | ----------------------- | ---- |
| getSettings      | `/api/getSettings`      | POST |
| getStateInstance | `/api/getStateInstance` | POST |
| sendMessage      | `/api/sendMessage`      | POST |
| sendFileByUrl    | `/api/sendFileByUrl`    | POST |

--------

### Чтобы я улучшил в дальнейшем развитии проекта:

- Валидация входных данных.

  Сейчас входные данные передаются напрямую в сервис.  
  В идеале я бы добавил middleware-валидацию с помощью AJV.

- Расширенная обработка ошибок.

  Сейчас сервис возвращает только 500 Internal Server Error.

  В продакшене я бы разделил ошибки на:
  - 400 — ошибки валидации
  - 401 / 403 — ошибки авторизации GREEN-API
  - 404 — неверный метод API
  - 502 — ошибка внешнего сервиса

- Логирование.

  Сейчас его вообще нет, но в дальнейшей разработке  
  я бы обязательно добавил как минимум логирование ошибок.

- Тестирование.

  На данном этапе его также нет, но в рамках дальнейшей разработки  
  я бы добавил unit-тесты сервисного слоя.


--------

### Подтверждение квалификации:

В рамках разработки проекта была подтверждена квалификация разработчика
по работе с GREEN-API.

- Сертификат разработчика GREEN-API (PDF):  
  [`green-api-developer-certificate.pdf`](docs/green-api-developer-certificate.pdf)

- Онлайн-проверка подлинности сертификата:  
  `https://green-api.com/certificates/developer/67fbe4739e4040cf.pdf`